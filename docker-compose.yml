version: '3'
services:
    genki:
        image: genki
        build:
            context: .
        volumes:
            - static:/vol/web/static
            - genki_media:/vol/web/media
        env_file:
            - .env
    nginx:
        build:
            context: ./deployment/nginx
        volumes:
            - static:/vol/static
            - genki_media:/vol/media
        ports:
            - "10080:8080"
        depends_on:
            - genki

volumes:
    static:
    genki_media:
        external: true
